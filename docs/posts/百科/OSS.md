# OSS

## 对象存储

对象存储（Object Storage）是现代云存储的一种方式，对象存储不是按目录和磁盘块存文件，而是把每个文件当成一个“对象”来管理，每个对象都有数据 + 元数据 + 唯一 ID。

每个对象（Object）由三部分组成：

1. **数据本体**：就是文件内容，比如图片、视频、文档。
2. **元数据（Metadata）**：描述信息，比如创建时间、类型、权限。
3. **唯一标识（Key/ID）**：用来在存储系统中定位对象，不依赖目录路径。

OSS 中的路径其实就是 Key：

```ts
https://bucket-name.oss-region.aliyuncs.com/folder1/file.jpg
```

## 模拟文件层级

 **对象存储里没有真正的文件夹**，它只是通过 **对象 Key 的前缀** 来模拟目录结构。

```ts
folder1/folder2/image.jpg
```

- `folder1/folder2/` 并不是实际的目录
- 整个字符串 `"folder1/folder2/image.jpg"` 是对象的 **唯一 Key**
- OSS 控制台会根据 `/` 自动帮你显示成文件夹层级

举个例子：

```ts
bucket/
  images/
    avatar.jpg
  docs/
    manual.pdf

```

OSS 存储内部就是：

```ts
"images/avatar.jpg"
"docs/manual.pdf"
```



## Bucket

OSS 里把存储空间叫做「桶（Bucket）」其实是一个非常形象的类比。Bucket 本质上就是一个容器，用来装对象（Object）。对象只能属于某个桶，这就是它的“命名空间”。

>  Bucket 是一个逻辑隔离单元。



## Bucket分类

### 冗余方式

| 对比项     | LRS 本地冗余 | ZRS 同城冗余 |
| ---------- | ------------ | ------------ |
| 存储位置   | 单机房       | 多机房       |
| 抗机房故障 | ❌            | ✅            |
| 成本       | 更低         | 更高         |
| 可用性     | 高           | 更高         |

可以理解为：

- LRS = 一个机房内部做 3 份
- ZRS = 多个机房各存一份

###  存储类型

| 类型 | 存储单价 | 访问速度 | 是否有取回费 | 典型场景 |
| ---- | -------- | -------- | ------------ | -------- |
| 标准 | 高       | 立即     | 无           | 网站资源 |
| 低频 | 中       | 立即     | 有           | 历史文件 |
| 归档 | 最低     | 需解冻   | 有           | 长期备份 |



## 费用计算

https://www.aliyun.com/price/detail?spm=5176.29463013.J_AHgvE-XDhTWrtotIBlDQQ.9.3fa893a1zb0I2z&saleProductCode=oss

### 存储费用

- 0.12 元/GB/月



### 流量费用

- 数据上传到 OSS：免费
- 下载流量：
  - 00:00 - 08:00（闲时）：0.25 元/GB
  - 08:00 - 24:00（忙时）：0.50 元/GB

### 请求费用

- PUT 类型请求：每月每地域 0 - 500 万次：免费，\>500 万次：0.01 元/万次
- GET 类型请求：每月每地域 0 - 2000 万次：免费，\>2000 万次：0.01 元/万次