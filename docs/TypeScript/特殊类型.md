# 特殊类型

- `any`：任意类型（关闭类型检查）
- `unknown`：未知类型（比 `any` 更安全，需要类型缩小）
- `never`：永远不会有值（函数抛异常或死循环的返回类型）
- `void`：没有返回值（常用于函数返回类型）



## any

- **含义**：表示任意类型，关闭类型检查。
- **特点**：编译器完全放弃检查，你可以对 `any` 类型的值做任何事。
- **危险性**：容易引入 bug。

```ts
let value: any;

value = 123;
value = 'hello';
value = { foo: 'bar' };

// 可以随便用，不会报错
value();
value.toUpperCase();
value.nonExist.prop.deep;

```



## unknown

- **含义**：未知类型，比 `any` 更安全。
- **特点**：你不能直接对 `unknown` 做任何操作，必须先 **类型缩小**（type narrowing）。
- **优势**：强制开发者进行类型检查。

| 特性     | `any`                      | `unknown`                     |
| -------- | -------------------------- | ----------------------------- |
| 类型检查 | 关闭检查                   | 需要缩小后才能用              |
| 可赋值性 | 可赋值给任意类型           | 只能赋值给 `any` 或 `unknown` |
| 安全性   | 不安全，容易出 bug         | 更安全，强制类型守卫          |
| 使用场景 | 临时跳过检查、快速原型开发 | 处理外部数据（如接口返回值）  |



```ts
let value: unknown;

value = 123;
value = 'hello';
value = { foo: 'bar' };

// ❌ 报错：不能直接操作 unknown
// value.toUpperCase();

// ✅ 必须先缩小类型
if (typeof value === 'string') {
  console.log(value.toUpperCase()); // ok
}

```

## never

`never` 表示 **永远不可能出现的类型**，没有值可以属于 `never`。

它是所有类型的 **底类型（bottom type）**。

可以赋值给任何类型，但没有任何类型能赋值给它（除了 `never` 本身）。

```ts
type A=number & string
```

A会被编译器推断为never类型，因为不存在一个值既可以是number类型又是string类型

```ts
let a: never;
// a = 123; // ❌ 报错
// a = "hello"; // ❌ 报错
// a = undefined; // ❌ 报错

```

应用场景：

1. 抛出异常的函数

```ts
function error(message: string): never {
  throw new Error(message);
}

```

2. 检查不可达分支

   如果触发default，说明存在业务逻辑错误，需要我们完善代码

```ts
type Shape = "circle" | "square";

function getArea(shape: Shape) {
  switch(shape) {
    case "circle": return Math.PI;
    case "square": return 1;
    default:
      const _exhaustiveCheck: never = shape; // ❌ 如果有新成员报错
      return _exhaustiveCheck;
  }
}

```

